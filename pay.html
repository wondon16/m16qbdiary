<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Get Password — QB Diary</title>

  <link rel="preload" as="image" href="quarterback pocketbook/real1.png">
  <link rel="icon" type="image/png" sizes="any" href="quarterback pocketbook/real1.png">
  <link rel="apple-touch-icon" href="quarterback pocketbook/real1.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css"/>
  <script src="space.js" defer></script>

  <!-- PayPal Buttons -->
  <script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=USD&intent=capture&components=buttons"></script>
</head>
<body class="pay-body">
  <section class="cover" aria-label="Purchase Access">
    <div class="cover-card">
      <div class="cover-logo-wrap">
        <img src="quarterback pocketbook/real1.png" alt="QB Diary logo" class="cover-logo" />
      </div>
      <h1 class="brand-name cover-title">Unlock QB Diary</h1>
      <p class="cover-desc">One-time payment of <strong>$7</strong> to receive your access password.</p>

      <div id="paypalButtons" class="paypal-wrap"></div>
      <div id="payMsg" class="pay-msg" aria-live="polite"></div>

      <div id="unlockPanel" class="unlock-panel" hidden>
        <p class="unlock-note">Payment captured ✅ — your password:</p>
        <div class="unlock-code" id="unlockCode">M16QB</div>
        <div class="unlock-cta">
          <button class="btn btn-primary pill" id="copyPwd">Copy Password</button>
          <a class="btn btn-outline pill" href="index.html">Return to App</a>
        </div>
      </div>

      <small class="cover-foot">Payments are securely processed by PayPal.</small>
    </div>
  </section>

  <script>
    paypal.Buttons({
      fundingSource: paypal.FUNDING.PAYPAL,
      style: { layout:'vertical', color:'gold', shape:'pill', label:'paypal' },
      createOrder: (data, actions) => actions.order.create({
        purchase_units: [{ description:'QB Diary — one-time access fee', amount:{ currency_code:'USD', value:'7.00' } }]
      }),
      onApprove: (data, actions) => actions.order.capture().then(details => {
        document.getElementById('payMsg').textContent = `Thanks, ${details.payer.name.given_name}! Payment ID: ${details.id}`;
        document.getElementById('unlockPanel').hidden = false;
        document.getElementById('unlockPanel').scrollIntoView({behavior:'smooth', block:'center'});
      }),
      onError: err => { console.error(err); document.getElementById('payMsg').textContent = 'Payment failed or was canceled. Please try again.'; }
    }).render('#paypalButtons');

    document.getElementById('copyPwd').addEventListener('click', async () => {
      try { await navigator.clipboard.writeText('M16QB'); document.getElementById('payMsg').textContent = 'Password copied. Return to the app and paste it.'; }
      catch { alert('Copy failed. Please copy manually: M16QB'); }
    });
  </script>
</body>
</html>
